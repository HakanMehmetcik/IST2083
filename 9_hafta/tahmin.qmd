---
title: "Tahmin"
author: "Hakan Mehmetcik"
date: "2024-11-28"
format: pdf
editor: visual
execute: 
  echo: true
  warning: true
---

------------------------------------------------------------------------

### **Ã‡Ä±karÄ±msal Ä°statistiÄŸin Ä°ki Ana AlanÄ±**

Ã‡Ä±karÄ±msal istatistik geleneksel olarak iki ana alana ayrÄ±lÄ±r:

1.  **Tahmin**

2.  **Hipotez Testi**

![](images/tahmin1.png)

------------------------------------------------------------------------

#### **Tahmin (Estimation)**

Tahmin, Ã¶rneklem verilerini kullanarak popÃ¼lasyondaki bilinmeyen bir parametrenin deÄŸerini tahmin etmeyi iÃ§erir. Ã–rneÄŸin, bir ÅŸehirdeki tÃ¼m yetiÅŸkinlerin ortalama boyunu bilmek istiyorsanÄ±z, o ÅŸehirden bir grup insanÄ±n boyunu Ã¶lÃ§ebilirsiniz. Bu Ã¶rneklemin ortalama boyu, ÅŸehirdeki tÃ¼m yetiÅŸkinlerin ortalama boyunu tahmin etmeye yardÄ±mcÄ± olur.

Tahmin iki tÃ¼rdedir:

-   **Nokta Tahmini (Point Estimation):** Bir parametre iÃ§in (Ã¶rneÄŸin, ortalama boy) tek bir en iyi tahmin saÄŸlar.

-   **AralÄ±k Tahmini (Interval Estimation):** Parametrenin dÃ¼ÅŸmesi muhtemel olduÄŸu bir aralÄ±k verir. Ã–rneÄŸin, "ortalama boyun 1,65 cm ve 1,75 cm arasÄ±nda olduÄŸunu ve bu tahmine %95 gÃ¼ven duyulduÄŸunu" belirtebilir.

![](images/tahmin2-01.png)

------------------------------------------------------------------------

## Nokta Tahmini (Point Estimation)

-   Bir popÃ¼lasyon parametresinin tek bir sayÄ±sal deÄŸerle tahmin edilmesidir.

Ä°statistikte, R dilindeki **pnorm** fonksiyonu, normal daÄŸÄ±lÄ±m iÃ§in kÃ¼mÃ¼latif daÄŸÄ±lÄ±m fonksiyonunu (CDF) hesaplamak iÃ§in kullanÄ±lÄ±r. EÄŸer popÃ¼lasyonun gerÃ§ek ortalamasÄ± (Î¼\\mu) ve standart sapmasÄ± (Ïƒ\\sigma) biliniyorsa, olasÄ±lÄ±klarÄ± hesaplamak iÃ§in **pnorm** fonksiyonunu doÄŸrudan kullanabilirsiniz.

```{r}
# Sahte IQ puanlarÄ± oluÅŸturalÄ±m
set.seed(178) # Rastgele sayÄ± Ã¼retimini sabitle
IQ <- rnorm(n=1000, mean=100, sd=15) # 1000 IQ puanÄ± Ã¼ret (ortalama=100, sd=15)
IQ <- round(IQ) # IQ puanlarÄ±nÄ± tam sayÄ±ya yuvarla


# Bir Ã¶ÄŸrencinin IQ puanÄ±nÄ±n 89 veya daha dÃ¼ÅŸÃ¼k olma olasÄ±lÄ±ÄŸÄ±nÄ± hesapla
prob <- pnorm(89, mean=100, sd=15)

# Sonucu yazdÄ±r
cat("Bir Ã¶ÄŸrencinin IQ puanÄ±nÄ±n 89 veya daha dÃ¼ÅŸÃ¼k olma olasÄ±lÄ±ÄŸÄ±:", round(prob, 2))

```

![](images/normal_iq-01.png)

Grafikte, normal daÄŸÄ±lÄ±m $(Î¼=100,Ïƒ=15)$ gÃ¶sterilmektedir. KÄ±rmÄ±zÄ± kesik Ã§izgi, x=89'u temsil ederken, mavi gÃ¶lgeli alan P(Xâ‰¤89) olasÄ±lÄ±ÄŸÄ±nÄ± ifade etmektedir. Bu, X rastgele deÄŸiÅŸkeninin 89 veya daha dÃ¼ÅŸÃ¼k IQ'da olma olasÄ±lÄ±ÄŸÄ±dÄ±r.

Peki 89'dan bÃ¼yÃ¼k olma olasÄ±lÄ±ÄŸÄ±nÄ± nasÄ±l hesaplarÄ±z?

```{r}
# eÄŸer hesapladÄ±ÄŸÄ±nÄ±z olasÄ±lÄ±ÄŸÄ± 1'den Ã§Ä±kartÄ±rsanÄ±z tersi olasÄ±lÄ±ÄŸÄ± bulursunuz
1-prob

# Sonucu yazdÄ±r
cat("Bir Ã¶ÄŸrencinin IQ puanÄ±nÄ±n 89'dan bÃ¼yÃ¼k olma olasÄ±lÄ±ÄŸÄ±:", round(1-prob, 2))

```

Bir ek Ã¶rnek olarak mtcars veri setinden tahmini bir yakÄ±t tÃ¼ketimi daÄŸÄ±lÄ±mÄ±na bakalÄ±m ve bu veri setinden rastgele bir araÃ§ seÃ§tiÄŸimizde yakÄ±t tÃ¼ketiminin mil baÅŸÄ±na 25 glaondan daha az olma ihtimalini kontrol edelim.

```{r}
# Ortalama yakÄ±t tÃ¼ketimi 
mean_mpg <- mean(mtcars$mpg)  # Ortalama yakÄ±t tÃ¼ketimi (mpg)
sd_mpg <- sd(mtcars$mpg)      # YakÄ±t tÃ¼ketimi standart sapmasÄ±
value <- 25                  # Kontrol edilecek deÄŸer

# P(X â‰¤ 25) olasÄ±lÄ±ÄŸÄ±nÄ± hesaplama
prob <- pnorm(25, mean=mean_mpg, sd=sd_mpg)

# SonuÃ§larÄ± yazdÄ±r
cat("mtcars veri setindeki ortalama yakÄ±t tÃ¼ketimi (mpg):", mean_mpg, "\n")
cat("YakÄ±t tÃ¼ketiminin 25 veya daha dÃ¼ÅŸÃ¼k olma olasÄ±lÄ±ÄŸÄ± (P(X â‰¤ 25)):", round(prob, 4), "\n")


```

![](images/ortalam_yakit.png)

Grafik, mtcars veri setinden tahmini bir yakÄ±t tÃ¼ketimi daÄŸÄ±lÄ±mÄ±nÄ± gÃ¶stermektedir. KÄ±rmÄ±zÄ± kesik Ã§izgi X=25 deÄŸerini temsil ederken, mavi gÃ¶lgeli alan P(Xâ‰¤25), yani yakÄ±t tÃ¼ketiminin 25 mpg veya daha az olma olasÄ±lÄ±ÄŸÄ±nÄ± ifade eder.

YakÄ±t tÃ¼ketiminin 25 galondan fazla olma ihtimali?

```{r}
# basit bir ÅŸekilde 25'ten kÃ¼Ã§Ã¼k olma olasÄ±lÄ±ÄŸÄ±nÄ± 1'den Ã§Ä±kartÄ±rsanÄ±z bÃ¼yÃ¼k olma olasÄ±lÄ±ÄŸÄ±nÄ± bulursunuz

1- pnorm(25, mean=mean_mpg, sd=sd_mpg)

# sonucu yazdÄ±ralÄ±m

cat("YakÄ±t tÃ¼ketiminin 25 veya daha dÃ¼ÅŸÃ¼k olma olasÄ±lÄ±ÄŸÄ± (P(X â‰¤ 25)):", round(1- pnorm(25, mean=mean_mpg, sd=sd_mpg), 4), "\n")

```

### Z-Skoru

Z-skoru, bir veri noktasÄ±nÄ±n bir daÄŸÄ±lÄ±m iÃ§indeki ortalamadan ne kadar uzakta olduÄŸunu standart sapma cinsinden ifade eden bir Ã¶lÃ§Ã¼ttÃ¼r. Z-skoru, bir veriyi standart normal daÄŸÄ±lÄ±ma (ortalama = 0, standart sapma = 1) dÃ¶nÃ¼ÅŸtÃ¼rmek iÃ§in kullanÄ±lÄ±r.

##### **FormÃ¼l:**

$$z = \frac{(X - \mu)}{\sigma}$$

-   X: DeÄŸer

-   Î¼: Ortalama (popÃ¼lasyon ortalamasÄ±)

-   Ïƒ: Standart sapma (popÃ¼lasyon standart sapmasÄ±)

#### **Z-Skorunun AnlamÄ±:**

**Z-skoru**, bir deÄŸerin ortalamadan ne kadar uzakta olduÄŸunu gÃ¶steren bir sayÄ±dÄ±r. **Bu uzaklÄ±ÄŸÄ± standart sapma cinsinden ifade eder.**

-   **Pozitif Z-Skoru:** Veri, ortalamanÄ±n Ã¼zerindedir.

-   **Negatif Z-Skoru:** Veri, ortalamanÄ±n altÄ±ndadÄ±r.

-   **z=0:** Veri, tam olarak ortalamadadÄ±r.

**Ã–rnek:** Bir Ã¶ÄŸrencinin sÄ±nav puanÄ± 85, sÄ±nÄ±fÄ±n ortalama puanÄ± 70 ve standart sapmasÄ± 10 ise:

$$z = \frac{(85 - 70)}{10} = 1.5 $$

Bu, Ã¶ÄŸrencinin puanÄ±nÄ±n sÄ±nÄ±f ortalamasÄ±nÄ±n 1.5 standart sapma Ã¼zerinde olduÄŸunu gÃ¶sterir.

::: callout-note
Tekrar edelim:

**Z-skoru**, verileri standartlaÅŸtÄ±rarak olasÄ±lÄ±klarÄ± hesaplamaya ve bunlarÄ± standard bir dÃ¼zlemde karÅŸÄ±laÅŸtÄ±rmaya olanak tanÄ±r.
:::

R'da bir Ã¶rnekle bakacak olursak:

PopÃ¼lasyon parametreleri ile Bireysel DeÄŸer Tahmini

```{r}

# OrtalamasÄ± 100 standard sapmasÄ± 15 olan bir normal daÄŸÄ±lÄ±m iÃ§in pnorm ile bireysel bir deÄŸerin 110'dan kÃ¼Ã§Ã¼k olma olasÄ±lÄ±ÄŸÄ±nÄ± hesapla

prob <- pnorm(110, 100, 15)

# Sonucu yazdÄ±r
cat("PopÃ¼lasyon iÃ§inde herhangi bir bireysel deÄŸerin 110'dan kÃ¼Ã§Ã¼k olma olasÄ±lÄ±ÄŸÄ±:", round(prob, 2))

```

**Z-Skoru ile Bireysel DeÄŸer Tahmini**

```{r}
# 110 deÄŸeri iÃ§in z-skorunu hesapla ve Ã¶rneklem ortalamasÄ±nÄ±n 110'dan kÃ¼Ã§Ã¼k olma olasÄ±lÄ±ÄŸÄ±na z skor ile bak
z <- ((110 -100) / 15)

# Ã–rneklem ortalamasÄ±nÄ±n 110'dan kÃ¼Ã§Ã¼k olma olasÄ±lÄ±ÄŸÄ±nÄ± hesapla
olasilik <- pnorm(z)

cat("Bireysel bir deÄŸerin 110'dan kÃ¼Ã§Ã¼k olma olasÄ±lÄ±ÄŸÄ±:", round(olasilik, 2))
```

## **AralÄ±k Tahmin Yapma**

EsasÄ±nda aralÄ±k tahmini yapmak nokta tahmini yapma ile benzerdir. Tek yapÄ±lmasÄ± gereken alt ve Ã¼st sÄ±nÄ±rlar iÃ§in nokta tahmini yapmak ve noktalar arasÄ± farkÄ± almaktÄ±r.

### Ã–rnek 1:

Ã–rneÄŸin, yukarÄ±daki Ã¶rnekte kullandÄ±ÄŸÄ±mÄ±z IQ verisetinden rastgele seÃ§ilen bir Ã¶ÄŸrencinin IQ'sunun 89 ile 101 arasÄ±nda olma olasÄ±lÄ±ÄŸÄ± nedir sorusu iÃ§in ilk yapmamÄ±z gereken alt sÄ±nÄ±r 89 ve Ã¼st sÄ±nÄ±r 101 arasÄ± nokta tahminlerini yapmak ve Ã§Ä±kan sonucu (bÃ¼yÃ¼kten kÃ¼Ã§Ã¼ÄŸÃ¼) Ã§Ä±karmaktÄ±r.

```{r}
# 89 iÃ§in olasÄ±lÄ±k
having_89 <- pnorm(89, mean_est, sd_est)
# 101 iÃ§in olasÄ±lÄ±k
having_101 <- pnorm(101, mean_est, sd_est)

# Sonucu yazdÄ±r
cat("Rastgele bir seÃ§imin 89 ile 101 arasÄ±nda olma olasÄ±lÄ±ÄŸÄ±:", having_101 - having_89)
```

Bunu GÃ¶rselleÅŸtirelim:

```{r}
library(ggplot2)

# Verileri tanÄ±mlama
mean_est <- 100    # Ortalama
sd_est <- 15       # Standart sapma

# x deÄŸerlerini oluÅŸtur (daÄŸÄ±lÄ±mÄ± Ã§izmek iÃ§in)
x_values <- seq(60, 140, by = 0.1) # 60 ile 140 arasÄ±nda deÄŸerler
y_values <- dnorm(x_values, mean = mean_est, sd = sd_est) # YoÄŸunluk hesaplama

# Verileri birleÅŸtirme
data <- data.frame(x = x_values, y = y_values)

# ggplot ile Ã§izim
plot <- ggplot(data, aes(x = x, y = y)) +
  geom_line(color = "blue", size = 1) +  # Normal daÄŸÄ±lÄ±m Ã§izgisi
  geom_area(data = subset(data, x >= 89 & x <= 101), aes(x = x, y = y), 
            fill = "red", alpha = 0.5) +  # 89-101 arasÄ± alan
  labs(
    title = "Normal DaÄŸÄ±lÄ±m ve 89-101 ArasÄ± Alan",
    x = "IQ DeÄŸerleri",
    y = "OlasÄ±lÄ±k YoÄŸunluÄŸu"
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(hjust = 0.5, size = 16, face = "bold")
  )

# Ã‡izimi gÃ¶ster
print(plot)

```

### Ã–rnek 2: Z Skoru Kullanma

Ã–ncelikle IQ puanlarÄ± iÃ§in tipik parametreleri tanÄ±mlayalÄ±m: bir ortalama (Î¼\\mu) 100 ve bir standart sapma (Ïƒ\\sigma) 15. Daha sonra, bir IQ puanÄ±nÄ±n 85 ile 115 arasÄ±nda olma olasÄ±lÄ±ÄŸÄ±nÄ± hesaplayacaÄŸÄ±z.

```{r}
# 1. Parametreleri TanÄ±mla
mean_IQ <- 100  # Ortalama IQ
sd_IQ <- 15     # Standart sapma
lower_bound <- 85  # Alt sÄ±nÄ±r
upper_bound <- 115  # Ãœst sÄ±nÄ±r

# 2. z-skorlarÄ±nÄ± hesapla
z_lower <- (lower_bound - mean_IQ) / sd_IQ  # Alt sÄ±nÄ±r z-skoru
z_upper <- (upper_bound - mean_IQ) / sd_IQ  # Ãœst sÄ±nÄ±r z-skoru

# 3. OlasÄ±lÄ±klarÄ± Hesapla
prob_lower <- pnorm(z_lower)  # P(X < 85)
prob_upper <- pnorm(z_upper)  # P(X < 115)
prob_interval <- prob_upper - prob_lower  # P(85 < X < 115)

# 4. SonuÃ§larÄ± YazdÄ±r
cat(sprintf("Rastgele seÃ§ilen bir Ã¶ÄŸrencinin IQ puanÄ±nÄ±n %s ile %s arasÄ±nda olma olasÄ±lÄ±ÄŸÄ± yaklaÅŸÄ±k %.4f", 
            lower_bound, upper_bound, prob_interval))
```

Bunu da gÃ¶rselleÅŸtirelim:

```{r}
library(ggplot2)
# grafik oluÅŸturalÄ±m
x <- seq(60, 140, length.out=300)  # X ekseni iÃ§in aralÄ±k
y <- dnorm(x, mean=mean_IQ, sd=sd_IQ)  # Normal daÄŸÄ±lÄ±m yoÄŸunluk fonksiyonu

# ggplot fonksiyonu ile grafiÄŸi Ã§izelim
ggplot(data=NULL, aes(x=x)) +
  geom_line(aes(y=y), color="blue") +  # Normal daÄŸÄ±lÄ±m eÄŸrisi
  geom_area(aes(y=ifelse(x >= lower_bound & x <= upper_bound, y, 0)), fill="lightgreen") +  # AralÄ±k iÃ§in gÃ¶lgeli alan
  geom_vline(xintercept=lower_bound, linetype="dashed", color="red") +  # Alt sÄ±nÄ±r Ã§izgisi
  geom_vline(xintercept=upper_bound, linetype="dashed", color="red") +  # Ãœst sÄ±nÄ±r Ã§izgisi
  labs(
    title="IQ DaÄŸÄ±lÄ±mÄ±",
    subtitle=sprintf("IQ puanÄ±nÄ±n %s ile %s arasÄ±nda olma olasÄ±lÄ±ÄŸÄ±", lower_bound, upper_bound),
    x="IQ PuanÄ±",
    y="YoÄŸunluk"
  ) +
  theme_minimal()


```

### **Z-Skoru mu DoÄŸrudan DeÄŸer mi?**

| **Durum** | **KullanÄ±m** | **Kod Ã–rneÄŸi** |
|------------------------|------------------------|------------------------|
| Standart normal daÄŸÄ±lÄ±m (Î¼=0,Ïƒ=1) | Z-skoru girilmeli | `pnorm(-1.5)` |
| Orijinal daÄŸÄ±lÄ±m (Î¼â‰ 0,Ïƒâ‰ 1) | Veri deÄŸerleri ve daÄŸÄ±lÄ±m parametreleri girilmeli | `pnorm(85, mean=100, sd=15)` |

::: callout-note
ğŸ’¡ **Standart Normal DaÄŸÄ±lÄ±mÄ± DÃ¶nÃ¼ÅŸÃ¼tÃ¼rme** basit bir ÅŸekilde verilerin z-skorlarÄ±nÄ±n hesaplanmasÄ±dÄ±r. Ã–rneÄŸin veri setimiz 4 kiÅŸilik bir Ã¶rneklemin 85, 100, 115, 130 ÅŸeklinde IQ skorlarÄ± olduÄŸunu var sayalÄ±m,:

```{r}
# Veriler
x <- c(85, 100, 115, 130)  # IQ deÄŸerleri
mu <- 100  # Ortalama IQ
sigma <- 15  # Standart sapma

# Standart normal daÄŸÄ±lÄ±ma dÃ¶nÃ¼ÅŸtÃ¼rme (z-skoru hesaplama)
z_scores <- (x - mu) / sigma
z_scores
```

Bu durumda **standart normal daÄŸÄ±lÄ±ma dÃ¶nÃ¼ÅŸÃ¼tÃ¼rlmÃ¼ÅŸ veriler -1, 0, 1, 2 olacaktÄ±r. Yani z-scorlarÄ±dÄ±r.** Standart normal daÄŸÄ±lÄ±ma dÃ¶nÃ¼ÅŸtÃ¼rmek, verilerinizi ortalamadan ve standart sapmadan baÄŸÄ±msÄ±z bir Ã¶lÃ§ekte ifade etmeyi saÄŸlar. ,

Ã–rneÄŸin **`mtcars` veri setini kullanarak standart normal daÄŸÄ±lÄ±ma dÃ¶nÃ¼ÅŸtÃ¼rmeyi aÃ§Ä±klayalÄ±m.**

`mtcars` veri setinde **"mpg"** (mil/gallon) sÃ¼tununu kullanacaÄŸÄ±z. Bu sÃ¼tun, bir aracÄ±n yakÄ±t verimliliÄŸini temsil eder. Ham deÄŸerleri standart normal daÄŸÄ±lÄ±ma dÃ¶nÃ¼ÅŸtÃ¼rÃ¼p **z-skorlarÄ±nÄ±** hesaplayacaÄŸÄ±z.

### **AdÄ±m 1: Veriyi Ä°nceleyelim**

Ã–ncelikle, `mtcars` veri setinin Ã¶zetine bakalÄ±m ve ortalama ile standart sapmayÄ± hesaplayalÄ±m.

```{r}
# mtcars veri setini yÃ¼kle
data(mtcars)

# mpg sÃ¼tununun Ã¶zet istatistikleri
summary(mtcars$mpg)

# Ortalama ve standart sapmayÄ± hesaplayalÄ±m
mean_mpg <- mean(mtcars$mpg)  # Ortalama
sd_mpg <- sd(mtcars$mpg)      # Standart sapma

cat("mpg iÃ§in Ortalama:", mean_mpg, "\n")
cat("mpg iÃ§in Standart Sapma:", sd_mpg, "\n")

```

Bu, `mtcars` veri setindeki **mpg** deÄŸerlerinin ortalamasÄ±nÄ±n 20.09, standart sapmasÄ±nÄ±n ise 6.03 olduÄŸunu gÃ¶sterir.

### **AdÄ±m 2: Standart Normal DaÄŸÄ±lÄ±ma DÃ¶nÃ¼ÅŸtÃ¼rme**

Åimdi, **mpg** sÃ¼tunundaki her bir deÄŸeri standart normal daÄŸÄ±lÄ±ma dÃ¶nÃ¼ÅŸtÃ¼rmek iÃ§in z-skorlarÄ±nÄ± hesaplayalÄ±m:

```{r}
# Z-skorlarÄ±nÄ± hesapla
mtcars$z_mpg <- (mtcars$mpg - mean_mpg) / sd_mpg

# Ä°lk birkaÃ§ sonucu gÃ¶relim
head(mtcars[, c("mpg", "z_mpg")])

```

-   **Birinci araÃ§** iÃ§in **mpg = 21.0** ve **z-skoru = 0.15**.

    -   Bu araÃ§, ortalamadan 0.15 standart sapma yukarÄ±da.

-   **AltÄ±ncÄ± araÃ§** iÃ§in **mpg = 18.1** ve **z-skoru = -0.33**.

    -   Bu araÃ§, ortalamadan 0.33 standart sapma aÅŸaÄŸÄ±da.

### **AdÄ±m 3: GÃ¶rselleÅŸtirme**

Verileri standart normal daÄŸÄ±lÄ±ma dÃ¶nÃ¼ÅŸtÃ¼rdÃ¼ÄŸÃ¼mÃ¼zÃ¼ gÃ¶stermek iÃ§in bir histogram Ã§izelim. Orijinal **mpg** deÄŸerlerini ve z-skorlarÄ±nÄ± gÃ¶rselleÅŸtireceÄŸiz.

```{r}
# Gerekli kÃ¼tÃ¼phane
if(!require(ggplot2)) install.packages("ggplot2", dependencies=TRUE)
library(ggplot2)

# Orijinal mpg histogramÄ±
ggplot(mtcars, aes(x=mpg)) +
  geom_histogram(binwidth=2, fill="blue", alpha=0.7, color="black") +
  labs(title="Orijinal mpg DaÄŸÄ±lÄ±mÄ±", x="mpg", y="Frekans") +
  theme_minimal()

# Z-skorlarÄ±nÄ±n histogramÄ±
ggplot(mtcars, aes(x=z_mpg)) +
  geom_histogram(binwidth=0.5, fill="green", alpha=0.7, color="black") +
  labs(title="Standart Normal DaÄŸÄ±lÄ±ma DÃ¶nÃ¼ÅŸtÃ¼rÃ¼lmÃ¼ÅŸ mpg", x="z-skoru", y="Frekans") +
  theme_minimal()

```

### **AdÄ±m 4: OlasÄ±lÄ±k Hesaplama**

**Ã–rnek:** P(15â‰¤mpgâ‰¤25)

Bu aralÄ±ktaki olasÄ±lÄ±ÄŸÄ± hesaplayalÄ±m:

1.  **Ham deÄŸerleri z-skorlarÄ±na Ã§evir:**

    -   Alt sÄ±nÄ±r (x=15): $z_{\text{lower}} = \frac{15 - 20.09}{6.03} \approx -0.84$

    -   Ãœst sÄ±nÄ±r (x=25): $z_{\text{upper}} = \frac{25 - 20.09}{6.03} \approx 0.81$

2.  **`pnorm` ile olasÄ±lÄ±k hesapla:**

```{r}
# Ham deÄŸerlerin z-skorlarÄ±nÄ± hesapla
z_lower <- (15 - mean_mpg) / sd_mpg
z_upper <- (25 - mean_mpg) / sd_mpg

# OlasÄ±lÄ±ÄŸÄ± hesapla
prob <- pnorm(z_upper) - pnorm(z_lower)
cat("P(15 <= mpg <= 25):", prob, "\n")

```

Yani, yaklaÅŸÄ±k %58 olasÄ±lÄ±kla, rastgele bir aracÄ±n yakÄ±t verimliliÄŸi 15 ile 25 arasÄ±nda olacaktÄ±r.

### **Z-SkorlarÄ± Olmadan OlasÄ±lÄ±k Hesaplama**

EÄŸer z-skorlarÄ±nÄ± kullanmadan hesap yapmak istiyorsanÄ±z, **`pnorm`** fonksiyonunun parametrelerine ham deÄŸerleri, ayrÄ±ca ortalama ve standart sapmayÄ± ekleyerek hesap yapabilirsiniz. Ã–rneÄŸin:

```{r}
# OlasÄ±lÄ±ÄŸÄ± doÄŸrudan ham deÄŸerlerle hesapla
prob <- pnorm(25, mean=mean_mpg, sd=sd_mpg) - pnorm(15, mean=mean_mpg, sd=sd_mpg)
cat("P(15 <= mpg <= 25):", prob, "\n")

```

### **SonuÃ§: Z-Skoru Åart mÄ±?**

HayÄ±r, z-skoru olasÄ±lÄ±k hesaplamalarÄ± iÃ§in ÅŸart deÄŸildir. DoÄŸrudan ham deÄŸerler ve daÄŸÄ±lÄ±m parametreleri (ortalama ve standart sapma) kullanÄ±larak aynÄ± sonuca ulaÅŸabilirsiniz.

Ancak z-skorlarÄ±:

-   Verileri standartlaÅŸtÄ±rÄ±r,

-   KarÅŸÄ±laÅŸtÄ±rmayÄ± kolaylaÅŸtÄ±rÄ±r,

-   DaÄŸÄ±lÄ±mÄ±n genel Ã¶zelliklerini daha iyi anlamanÄ±zÄ± saÄŸlar.

Ã–zellikle eÄŸitim ve standart hesaplamalarda, z-skorlarÄ±nÄ± Ã¶ÄŸrenmek ve kullanmak faydalÄ±dÄ±r, Ã§Ã¼nkÃ¼ daha karmaÅŸÄ±k analizlerin temelini oluÅŸturur.
:::

## **GÃ¼ven AralÄ±ÄŸÄ± ile Tahmin Yapma (Confidence Interval)**

GÃ¼ven aralÄ±ÄŸÄ±, bir popÃ¼lasyon parametresinin (Ã¶rneÄŸin ortalama veya oran) belirli bir olasÄ±lÄ±k seviyesinde hangi deÄŸerler arasÄ±nda yer alabileceÄŸini ifade eden bir aralÄ±ktÄ±r. GÃ¼ven aralÄ±ÄŸÄ±, bir tahminin gÃ¼venilirliÄŸini ve belirsizliÄŸini Ã¶lÃ§mek iÃ§in istatistikte kullanÄ±lan Ã¶nemli bir araÃ§tÄ±r.

------------------------------------------------------------------------

### **1. GÃ¼ven AralÄ±ÄŸÄ± Nedir?**

Bir gÃ¼ven aralÄ±ÄŸÄ±, Ã¶rneklem verilerinden hesaplanÄ±r ve iki sÄ±nÄ±rdan oluÅŸur:

-   **Alt SÄ±nÄ±r:** Parametrenin olasÄ± en dÃ¼ÅŸÃ¼k deÄŸeri.

-   **Ãœst SÄ±nÄ±r:** Parametrenin olasÄ± en yÃ¼ksek deÄŸeri.

**Ã–rnek:** Bir sÄ±nÄ±ftaki Ã¶ÄŸrencilerin ortalama IQ'su iÃ§in %95 gÃ¼ven aralÄ±ÄŸÄ± \[98,100\] ise, bu ÅŸu anlama gelir:

-   %95 gÃ¼venle, gerÃ§ek popÃ¼lasyon ortalamasÄ± bu aralÄ±k iÃ§inde yer alÄ±r.

### **2. GÃ¼ven AralÄ±ÄŸÄ±nÄ±n UnsurlarÄ±**

1.  **GÃ¼ven DÃ¼zeyi (Confidence Level):**

    -   GÃ¼ven aralÄ±ÄŸÄ±nÄ±n ne kadar gÃ¼venilir olduÄŸunu ifade eder.

    -   Genellikle %90, %95 veya %99 olarak seÃ§ilir.

    -   Ã–rneÄŸin, %95 gÃ¼ven dÃ¼zeyi, 100 Ã¶rneklemden 95'inde gerÃ§ek popÃ¼lasyon parametresinin aralÄ±k iÃ§inde olacaÄŸÄ±nÄ± belirtir.

2.  **Standart Hata (Standard Error ):**

    -   Ã–rneklem ortalamasÄ±nÄ±n popÃ¼lasyon ortalamasÄ±ndan ne kadar sapabileceÄŸini Ã¶lÃ§er.

    -   FormÃ¼lÃ¼: $$SE = \frac{\sigma}{\sqrt{n}}$$â€‹

        -   Ïƒ\sigma: Standart sapma

        -   n: Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼

3.  **Kritik Z veya t-DeÄŸeri:**

    -   GÃ¼ven aralÄ±ÄŸÄ±nÄ± belirlemek iÃ§in kullanÄ±lan Ã§arpan.

    -   Normal daÄŸÄ±lÄ±m iÃ§in kritik z-deÄŸeri, gÃ¼ven dÃ¼zeyine gÃ¶re seÃ§ilir (z=1.96 iÃ§in %95 gÃ¼ven dÃ¼zeyi).

    -   Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼ kÃ¼Ã§Ã¼kse (n\<30), t-daÄŸÄ±lÄ±mÄ± kullanÄ±lÄ±r.

4.  **Tahmin Edilen DeÄŸer:**

    -   Genellikle Ã¶rneklem ortalamasÄ±dÄ±r $(\bar{x})$ .

------------------------------------------------------------------------

### **3. GÃ¼ven AralÄ±ÄŸÄ± NasÄ±l HesaplanÄ±r?**

GÃ¼ven aralÄ±ÄŸÄ±, aÅŸaÄŸÄ±daki formÃ¼lle hesaplanÄ±r:

$$ \text{GÃ¼ven AralÄ±ÄŸÄ±} = \bar{x} \pm (z_{\alpha/2} \times SE)$$

-   $\bar{x}$: Ã–rneklem ortalamasÄ±

-   $z_{\alpha/2}â€‹$: Kritik z-deÄŸeri

-   SE: Standart hata

**Ã–rnek:**

-   Ortalama $(\bar{x})$ = 100

-   Standart sapma (Ïƒ\sigmaÏƒ) = 15

-   Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼ (n) = 30

-   GÃ¼ven dÃ¼zeyi: %95 (z=1.96)

Standart hata:

$$SSE = \frac{\sigma}{\sqrt{n}} = \frac{15}{\sqrt{30}} = 2.74$$

GÃ¼ven aralÄ±ÄŸÄ±:

$$\text{GÃ¼ven AralÄ±ÄŸÄ±} = 100 \pm (1.96 \times 2.74) = [94.63, 105.37]$$

Bu durumda, gerÃ§ek popÃ¼lasyon ortalamasÄ±nÄ±n %95 gÃ¼venle 94.63 ile 105.37 arasÄ±nda olduÄŸunu sÃ¶yleyebiliriz.

------------------------------------------------------------------------

### **4. GÃ¼ven AralÄ±klarÄ±nÄ±n KullanÄ±m AlanlarÄ±**

1.  **PopÃ¼lasyon Parametrelerini Tahmin Etmek:**

    -   GerÃ§ek popÃ¼lasyon ortalamasÄ±, oranÄ± veya farkÄ±nÄ± tahmin etmek iÃ§in kullanÄ±lÄ±r.

2.  **Hipotez Testi:**

    -   GÃ¼ven aralÄ±ÄŸÄ±, H0â€‹ hipotezinin reddedilip reddedilemeyeceÄŸini belirlemek iÃ§in kullanÄ±labilir.

3.  **KÄ±yaslama:**

    -   FarklÄ± gruplar arasÄ±nda istatistiksel olarak anlamlÄ± bir fark olup olmadÄ±ÄŸÄ±nÄ± deÄŸerlendirmek iÃ§in.

### **Ã–rnek 1:**

Bir Ã¶rneklemde, sosyal medyada geÃ§irilen gÃ¼nlÃ¼k ortalamayÄ± hesaplÄ±yoruz:

-   Ã–rneklem ortalamasÄ± ($\bar{x}$): 3 saat.

-   Standart sapma (s): 0.5 saat.

-   Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼ (n): 100.

-   GÃ¼ven dÃ¼zeyi: %95.

#### **1. Ã–rneklem DeÄŸerlerini TanÄ±mla**

Kodun ilk kÄ±smÄ±nda gÃ¼ven aralÄ±ÄŸÄ±nÄ± hesaplamak iÃ§in gereken Ã¶rneklem bilgileri tanÄ±mlanÄ±r:

```{r}
# Ã–rneklem deÄŸerleri
mean_x <- 3        # Ã–rneklem ortalamasÄ±
sd_x <- 0.5        # Standart sapma
n <- 100           # Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼
confidence <- 0.95 # GÃ¼ven dÃ¼zeyi

```

#### **2. Z-Skorunu Hesapla**

Kritik z-deÄŸeri, %95 gÃ¼ven aralÄ±ÄŸÄ± iÃ§in hesaplanÄ±r. Bu, toplam alanÄ±n $1 - \alpha / 2 = 0.975$ kÄ±smÄ±nÄ±n altÄ±nda kalan z-deÄŸeridir:

```{r}
z <- qnorm((1 + confidence) / 2)
```

**AÃ§Ä±klama:**

-   (1+confidence)/2: %95 gÃ¼ven dÃ¼zeyi iÃ§in yukarÄ±daki kritik alanÄ± belirler.

    -   (1+0.95)/2=0.975.

    -   Bu, standart normal daÄŸÄ±lÄ±mda toplam alanÄ±n %97.5'ine denk gelir.

-   **`qnorm(0.975)`**: Standart normal daÄŸÄ±lÄ±mdan bu alan iÃ§in z-deÄŸerini bulur.

    -   z=1.96, yani %95 gÃ¼ven dÃ¼zeyi iÃ§in kullanÄ±lan standart z-skorudur.

#### **3. Standart Hata Hesapla**

Standart hata (SE), standart sapmanÄ±n Ã¶rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne baÄŸlÄ± Ã¶lÃ§eklenmiÅŸ bir versiyonudur:

```{r}
se <- sd_x / sqrt(n)
```

#### **4. Alt ve Ãœst SÄ±nÄ±rlarÄ± Hesapla**

Alt ve Ã¼st sÄ±nÄ±rlar, gÃ¼ven aralÄ±ÄŸÄ± formÃ¼lÃ¼ne gÃ¶re hesaplanÄ±r:

```{r}
lower_bound <- mean_x - z * se
upper_bound <- mean_x + z * se

```

#### **5. GÃ¼ven AralÄ±ÄŸÄ±nÄ± OluÅŸtur**

Son adÄ±mda, alt ve Ã¼st sÄ±nÄ±rlar bir vektÃ¶r olarak birleÅŸtirilir:

```{r}
confidence_interval <- c(lower_bound, upper_bound)
cat("Bu, %95 gÃ¼ven dÃ¼zeyinde, popÃ¼lasyonun gerÃ§ek ortalamasÄ±nÄ±n", round(confidence_interval,2), "saat arasÄ±nda olduÄŸunu gÃ¶sterir.")
```

### Ã–rnek 2:

AynÄ± iÅŸlemi yukarÄ±da daha Ã¶nce yaptÄ±ÄŸÄ±mÄ±z IQ veri seti iÃ§inde yapabiliriz (Ã§Ã¼nkÃ¼ Ã¶rneklem sayÄ±mÄ±z n\>30, n=1000) olduÄŸu iÃ§in.

#### **1. Ã–rneklem DeÄŸerlerini TanÄ±mla**

Kodun ilk kÄ±smÄ±nda gÃ¼ven aralÄ±ÄŸÄ±nÄ± hesaplamak iÃ§in gereken Ã¶rneklem bilgileri tanÄ±mlanÄ±r:

```{r}
mean_est <- 100    # Ã–rneklem ortalamasÄ±
sd_est <- 15       # Standart sapma
n <- 1000          # Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼
confidence <- 0.99      # %99 gÃ¼ven aralÄ±ÄŸÄ± iÃ§in anlamlÄ±lÄ±k seviyesi
```

#### 2. Kritik Z-Skoru Hesaplama

Kritik z-deÄŸeri, %99 gÃ¼ven aralÄ±ÄŸÄ± iÃ§in Î±=0.01. Bu durumda:

$$
z = qnorm(1 - \alpha / 2) = qnorm(0.995)
$$

```{r}
z <- qnorm(1 - confidence / 2) 
```

#### **3. Standart Hata Hesapla**

Standart hata (SE), standart sapmanÄ±n Ã¶rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼ne baÄŸlÄ± Ã¶lÃ§eklenmiÅŸ bir versiyonudur:

```{r}
se <- sd_est / sqrt(n)
```

#### **4. Alt ve Ãœst SÄ±nÄ±rlarÄ± Hesapla**

Alt ve Ã¼st sÄ±nÄ±rlar, gÃ¼ven aralÄ±ÄŸÄ± formÃ¼lÃ¼ne gÃ¶re hesaplanÄ±r:

```{r}
lower_bound <- mean_est - z * se
upper_bound <- mean_est + z * se
```

#### **5. GÃ¼ven AralÄ±ÄŸÄ±nÄ± OluÅŸtur**

Son adÄ±mda, alt ve Ã¼st sÄ±nÄ±rlar bir vektÃ¶r olarak birleÅŸtirilir:

```{r}
confidence_interval <- c(lower_bound, upper_bound)
cat("Bu, %99 gÃ¼ven dÃ¼zeyinde, popÃ¼lasyonun gerÃ§ek ortalamasÄ±nÄ±n", round(confidence_interval,2), "IQ skoru arasÄ±nda olduÄŸunu gÃ¶sterir.")
```

### **t-DaÄŸÄ±lÄ±mÄ±nÄ± Kullanma Durumu**

EÄŸer Ã¶rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼ kÃ¼Ã§Ã¼kse (n\<30 ) veya popÃ¼lasyon standart sapmasÄ± bilinmiyorsa, t-daÄŸÄ±lÄ±mÄ± kullanÄ±lÄ±r:

$$GA = \bar{x} \pm t \cdot \frac{s}{\sqrt{n}}$$â€‹

Burada:

-   t: Ä°stenen gÃ¼ven dÃ¼zeyine ve serbestlik derecesine (df=nâˆ’1) gÃ¶re t-daÄŸÄ±lÄ±m tablosundan alÄ±nan t-skoru

**R'da `qnorm()` kullanarak gÃ¼ven aralÄ±ÄŸÄ± hesaplama**, bÃ¼yÃ¼k Ã¶rneklemlerde (Ã¶rneÄŸin nâ‰¥30) standart normal daÄŸÄ±lÄ±m varsayÄ±larak yapÄ±lÄ±r. EÄŸer kÃ¼Ã§Ã¼k Ã¶rneklemle Ã§alÄ±ÅŸÄ±yorsanÄ±z, **t-daÄŸÄ±lÄ±mÄ±** kullanarak `qt()` ile aynÄ± iÅŸlemi yapabilirsiniz. R'daki `qt()` fonksiyonu, **t-daÄŸÄ±lÄ±mÄ± tablosundan kritik deÄŸerleri** bulmak iÃ§in kullanÄ±lÄ±r. Bu fonksiyon Ã¶zellikle **kÃ¼Ã§Ã¼k Ã¶rneklemler** (n\<30 ) veya popÃ¼lasyon standart sapmasÄ±nÄ±n bilinmediÄŸi durumlarda gÃ¼ven aralÄ±ÄŸÄ± ve hipotez testlerinde kullanÄ±lÄ±r.

qt(p,df) fonksiyonunda:

-   **`p` (Probability):** DaÄŸÄ±lÄ±mÄ±n altÄ±nda kalan alanÄ±n oranÄ±. Genellikle $(\text{gÃ¼ven dÃ¼zeyi}) / 2$ formÃ¼lÃ¼yle hesaplanÄ±r.

    -   Ã–rneÄŸin, %95 gÃ¼ven dÃ¼zeyi iÃ§in p=0.975.

-   **`df` (Degrees of Freedom):** Serbestlik derecesi. Genellikle df=nâˆ’1 formÃ¼lÃ¼yle bulunur.

### **AdÄ±mlar: t-daÄŸÄ±lÄ±mÄ± ile Kritik DeÄŸer Bulma**

### Ã–rnek 3:

Bir Ã¶rneklemin ortalamasÄ± 3 saat, standart sapmasÄ± 0.5 saat ve Ã¶rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼ 10. GÃ¼ven dÃ¼zeyi %95.

#### **1. Serbestlik Derecesi (df) Hesapla:** df=nâˆ’1

```{r}
n <- 10
df <- n - 1  # Serbestlik derecesi
```

#### **2. GÃ¼ven DÃ¼zeyine GÃ¶re `p` Hesapla:** %95 gÃ¼ven dÃ¼zeyi iÃ§in:

```{r}
confidence <- 0.95
p <- (1 + confidence) / 2  # GÃ¼ven dÃ¼zeyi iÃ§in p
```

#### 3. `qt()` ile t-deÄŸerini Bul:

```{r}
t_value <- qt(p, df)  # Kritik t-deÄŸeri
```

#### 4. **GÃ¼ven AralÄ±ÄŸÄ±nÄ± Hesapla:** GÃ¼ven aralÄ±ÄŸÄ± denklemi:

```{r}
mean_x <- 3  # Ã–rneklem ortalamasÄ±
sd_x <- 0.5  # Standart sapma
se <- sd_x / sqrt(n)  # Standart hata

lower_bound <- mean_x - t_value * se
upper_bound <- mean_x + t_value * se
confidence_interval <- c(lower_bound, upper_bound)
confidence_interval
```

------------------------------------------------------------------------

```{r}
# YaÅŸam sÃ¼resi tahmini (gapminder veri seti)
if(!require(gapminder)) install.packages("gapminder")
library(gapminder)

# Ortalama ve standart sapma hesaplama
mean_life <- mean(gapminder$lifeExp)  # Ortalama yaÅŸam sÃ¼resi
sd_life <- sd(gapminder$lifeExp)      # Standart sapma
n_life <- length(gapminder$lifeExp)  # Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼

# P(X â‰¤ 70) olasÄ±lÄ±ÄŸÄ±nÄ± hesaplama
value <- 70
prob <- pnorm(value, mean=mean_life, sd=sd_life)

# GÃ¼ven aralÄ±ÄŸÄ± hesaplama
alpha <- 0.05  # %95 gÃ¼ven dÃ¼zeyi
z <- qnorm(1 - alpha / 2)  # Kritik z-deÄŸeri
error <- z * (sd_life / sqrt(n_life))  # Hata payÄ±
lower_bound <- mean_life - error
upper_bound <- mean_life + error

# SonuÃ§larÄ± yazdÄ±rma
cat(sprintf("Gapminder veri setindeki ortalama yaÅŸam sÃ¼resi: %.2f yÄ±l (%s%% gÃ¼ven aralÄ±ÄŸÄ±: %.2f - %.2f)\n", 
            mean_life, 100 * (1 - alpha), lower_bound, upper_bound))

cat(sprintf("Rastgele seÃ§ilen bir kiÅŸinin yaÅŸam sÃ¼resinin 70 yÄ±ldan az olma olasÄ±lÄ±ÄŸÄ±: %.4f\n", prob))
```

```{r}
# GÃ¼ven aralÄ±ÄŸÄ± ile displacement tahmini
mean_disp <- mean(mtcars$disp)  # Ortalama motor hacmi
sd_disp <- sd(mtcars$disp)      # Standart sapma
n_disp <- length(mtcars$disp)   # Ã–rneklem bÃ¼yÃ¼klÃ¼ÄŸÃ¼
alpha <- 0.01  # %99 gÃ¼ven dÃ¼zeyi
z <- qnorm(1 - alpha / 2)  # Kritik z-deÄŸeri

# GÃ¼ven aralÄ±ÄŸÄ±
error <- z * (sd_disp / sqrt(n_disp))
lower_bound <- mean_disp - error
upper_bound <- mean_disp + error

cat(sprintf("mtcars veri setindeki ortalama motor hacmi: %.2f (displacement) (%s%% gÃ¼ven aralÄ±ÄŸÄ±: %.2f - %.2f)\n", 
            mean_disp, 100 * (1 - alpha), lower_bound, upper_bound))

```

![](images/motor_guven_araligi.png)

Grafikte, motor hacmi daÄŸÄ±lÄ±mÄ± ve %99 gÃ¼ven aralÄ±ÄŸÄ± gÃ¶sterilmektedir:

-   **YeÅŸil kesik Ã§izgiler**: Alt ve Ã¼st sÄ±nÄ±rlarÄ± temsil eder.

-   **Mavi gÃ¶lgeli alan**: GÃ¼ven aralÄ±ÄŸÄ± iÃ§indeki deÄŸerleri ifade eder.
